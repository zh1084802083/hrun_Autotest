config:
    name: 数据舱--现金流详情
    variables:
        access_token: ${get_token()}
    export:
        - building_id
teststeps:
-   name: 获取楼宇id
    testcase: testcases/Buildings/buildings.yml

-   name: 数据舱--现金流详情
    request:
        headers:
            authorization: Bearer $access_token
        method: GET
        params:
            buildingIds: $building_id
            domainTypes: CASH_MATCH
            endDate: '2021-08-31'
            page: '0'
            size: '20'
            startDate: '2021-08-01'
            temporalUnit: MONTH
        url: ${ENV(api_url)}/assets/cashflows/detail
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - content.number
        - 0
    -   eq:
        - content.size
        - 20
    -   eq:
        - content.totalElements
        - 0
    -   eq:
        - content.totalPages
        - 0
    -   eq:
        - content.numberOfElements
        - 0
    -   eq:
        - content.hasContent
        - false
    -   eq:
        - content.first
        - true
    -   eq:
        - content.last
        - true
    -   eq:
        - content.empty
        - true
